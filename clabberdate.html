<head>
  <title>clabberdate</title>
</head>

<body>
	{{> header }}

	<div id="username-form-wrapper" class="modal">
		<div class="username-form-label">
			<img src="/write.png">
			What name should everyone else see you as?
			<input type="text" id="username-form" /><br/>
			<input type="submit" id="username-submit" value="Done" />
		</div>
	</div>

	{{# if is_page "landing" }}
		{{> landing }}
	{{ else }}
		{{> calendar_header }}
		{{> calendar_dates }}
		{{> calendar_comments }}
	{{/ if }}
</body>

<template name="user_prompt">
	Username: <input type="text" id="choose-username" value="{{ username }}" />
	<input type="submit" id="save-username" value="Save" />
	{{ user_id }}
</template>

<template name="calendar_header">
	<div id="calendar-header">
		{{# if calendar }}
		{{# with calendar }}
			<h2 id="calendar-description">{{ description }}</h2>
			<div id="calendar-description-sub">
				Organized by <strong>{{ username creator_id }}. </strong>
				<span id="calendar-age">Created {{ human_time timestamp }}.</span>
			</div>
		{{/ with }}
		{{/ if }}
	</div>
	<div class="clear"></div>
</template>

<template name="calendar_contributors">
	<div id="calendar-contributors">
		<strong>People contributing</strong>
		{{# each users }}
		<div class="calendar-contributor">
			{{ username this }}
		</div>
		{{/ each }}
	</div>
</template>

<template name="calendar_dates">
	<input type="button" value="All" class="dow-filter" />
	<input type="button" value="Sunday" class="dow-filter" />
	<input type="button" value="Monday" class="dow-filter" />
	<input type="button" value="Tuesday" class="dow-filter" />
	<input type="button" value="Wednesday" class="dow-filter" />
	<input type="button" value="Thursday" class="dow-filter" />
	<input type="button" value="Friday" class="dow-filter" />
	<input type="button" value="Saturday" class="dow-filter" />
	<br/>
	<input type="button" value="January" class="month-filter" />
	<input type="button" value="February" class="month-filter" />
	<input type="button" value="March" class="month-filter" />
	<input type="button" value="April" class="month-filter" />
	<input type="button" value="May" class="month-filter" />
	<input type="button" value="June" class="month-filter" />
	<input type="button" value="July" class="month-filter" />
	<input type="button" value="August" class="month-filter" />
	<input type="button" value="September" class="month-filter" />
	<input type="button" value="October" class="month-filter" />
	<input type="button" value="November" class="month-filter" />
	<input type="button" value="December" class="month-filter" />
	<div id="calendar-dates">
	{{# each dates }}
		{{> date }}
	{{/ each }}
	</div>
</template>

<template name="date">
	<div class="date {{ weekday date }} {{ month date }}">
		<div class="color-block"></div>
		{{ format_date date }}
		<div class="responses">
		{{# each responses _id }}
			{{ username user_id }}
		{{/ each }}
		</div>

		<input class="set-positive" type="button" value="Good Date ({{ positive_count _id }})"/>
		<input class="set-negative" type="button" value="Bad Date ({{ negative_count _id }})"/>
	</div>
</template>

<template name="calendar_comments">

	<div id="calendar-comments">
		<input type="text" id="calendar-comment-input" />
		<input type="submit" id="calendar-comment-submit" value="Comment" /> <br/>

	{{# each comments }}
	<div class="calendar-comment">
		{{# if user_id }}
		<div class="comment-user">
			{{ username user_id }}
		</div>
		<div class="comment-text arrow_box">
			<span class="comment-time">
				{{ comment_time time }}
			</span>
			<span class="comment-body">
				{{ text }}
			</span>
		</div>
		<div class="comment-date">
			{{ comment_date time }}
		</div>
		{{/ if }}
	</div>
	{{/ each }}
	</div>
</template>

<template name="recent_calendars">
Calendars you've made:<br/>
</template>

