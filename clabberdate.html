<head>
  <title>clabberdate</title>
</head>

<body>
	{{> header }}

	{{# if is_page "landing" }}
		{{> landing }}
	{{ else }}
		<hr/>
		{{> user_prompt }}
		<hr/>
		{{> calendar }}
	{{/ if }}
</body>

<template name="user_prompt">
	Username: <input type="text" id="choose-username" value="{{ username }}" />
	<input type="submit" id="save-username" value="Save" />
	{{ user_id }}
</template>

<template name="calendar">
	{{# if calendar }}
	{{# with calendar }}
		<h2>{{ description }}</h2> - {{ _id }}
	{{/ with }}
	{{/ if }}
	<br/>

	<strong>People contributing</strong><br/>
	{{# each users }}
		{{ username this }}
	{{/ each }}
	<br/>

	<br/>
	{{# each dates }}
		{{> date }}
	{{/ each }}

	<br/>
	<input type="text" id="calendar-comment" />
	<input type="submit" id="calendar-comment-submit" value="Comment" />

	<br/>
	{{# each comments }}
		{{ username user_id }} says: {{ text }} - {{ human_time time }}<br/>
	{{/ each }}
</template>

<template name="date">
	<div class="date">
		{{ format_date date }} - {{ _id }}
		{{# each responses _id }}
			{{ username user_id }}
		{{/ each }}
	</div>
	<input class="set-positive" type="button" value="Good Date ({{ positive_count _id }})"/>
	<input class="set-negative" type="button" value="Bad Date ({{ negative_count _id }})"/>
</template>

<template name="recent_calendars">
Calendars you've made:<br/>
</template>

